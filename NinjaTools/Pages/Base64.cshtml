@page
@model NinjaTools.Pages.Base64Model
@{
    ViewData["Title"] = "Base64 Encode/Decode";
}
<div class="row">
    <div class="col-xl-6">
        <h1 class="display-4">Plain</h1>
        <textarea id="input" class="form-control code-style" rows="10"></textarea>
    </div>
    <div class="col-xl-6">
        <h1 class="display-4">Encoded</h1>
        <textarea id="encoded" class="form-control code-style" rows="10"></textarea>
    </div>
</div>


@section Scripts
{
    <script>
        $('#input').on('input propertychange', function () {
            var details = $(this).val();
            // If it's the propertychange event, make sure it's the value that changed.
            if (window.event && event.type == 'propertychange' && event.propertyName != 'value')
                return;

            // Clear any previously set timer before setting a fresh one
            window.clearTimeout($(this).data('timeout'));

            $(this).data('timeout', setTimeout(function () {
                $('#encoded').val(btoa(details));
            }, 500));
        });
        
        $('#encoded').on('input propertychange', function () {
            var details = $(this).val();
            // If it's the propertychange event, make sure it's the value that changed.
            if (window.event && event.type == 'propertychange' && event.propertyName != 'value')
                return;

            // Clear any previously set timer before setting a fresh one
            window.clearTimeout($(this).data('timeout'));
            $(this).data('timeout', setTimeout(function () {
                $('#input').val(atob(details));
            }, 500));
        });
    </script>
}